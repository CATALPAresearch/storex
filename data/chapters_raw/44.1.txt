44.1 Type casts
Wie bereits in Kapitel 27 von Kurseinheit 3 erläutert, versteht man unter einem Type cast
(einer Typumwandlung ) den Vorgang, bei dem einem Pr ogramme lement ein anderer Typ
aufgezwungen wird als der, mit dem es deklariert wurde. Type casts werden also insbeson-
dere auf Variablen und auf Methodenausdrücke angewendet, und zwar immer dann, wenn
man diese einer Variable zuweisen will, zu der keine Zuw eisungskompatibilität besteht, oder
wenn man darauf eine Methode aufrufen (oder ein Feld zugreifen) will, das der deklarierte
Typ nicht anbietet. So führt z. B.
zu zwei Typfehlern: einem, weil o vom Typ Object ist, der keine Methode substring
kennt, obwohl das Objekt, auf das o verweist, diese Methode sehr wohl kennt, und einem,
weil Object nicht zuweisungskompatibel mit String ist. Zwei Type casts lösen das Prob-
lem:
Wie schon in Kapitel 27, so unterscheiden wir auch hier in Abhängigkeit
davon, wie die beteiligten Typen, der Ausgangstyp und der Zieltyp eines
Type casts , miteinander in Beziehung stehen, drei Arten von Typumwandlu ngen :
 Up casts : der Zieltyp ist ein Supertyp des Ausgangstyps
 Down casts : der Zieltyp ist ei n Subtyp des Ausgangstyps
 Cross casts : Zieltyp und Ausgangstyp stehen in keiner Subtypenbeziehung zueinan-
der, stehen also gewissermaßen nebeneinander.
Bei obigem Beispi el handelt es sich um (die bei weitem häufigsten) Down casts .
Wie man sich leicht vor Augen hält, ist ein Up cast auch in JAVA immer sicher , da jedes
Objekt neben seinem Typ zugleich auch den Typ all seiner Supertypen hat (weswegen der
Up cast auch immer w eggelassen werden kann); Down und Cross casts sind jedoch nur
erfolgreich , wenn das Objekt , zu dem der typumgewandelte Ausdruck auswertet, tatsäch-
lich den Zieltyp (oder einen Subtyp davon) hat. Dies kann jedoch zur Übersetzungszeit nicht
garantiert werden; Down und Cross casts können daher zu Laufzeittypfehlern (der in JAVA
sog. Class cast exception ) führen.
Mit der Einführung von Generics ergeben sich ein paar Probleme mit im-
pliziten Typumwandlungen. Das nachfolgende Beispiel ist jedoch nur für Interessierte; ins-
besondere auf sog. Raw types und das damit zusammenhängende Konzept der Type era-
sure wird in diesem Kurs nämlich nicht eingegangen. drei Arten von Type
Bei Vorliegen der folgenden parametrisierten Klassendefinition
und folgender Variablendeklarationen und Initialisierungen
ergeben die Zuweisungen
bei der letzten einen Laufzeitfehler vom Typ Class cast exception .
