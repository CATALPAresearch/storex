68.3 Ein Beispiel
Ein konkretes Beispiel für die Verletzung des Law of Demeter ist die folgende alternative
Implementierung der Methode auswerten in der Klasse Klausel (Zeilen 1650 –1652 ):
Hier wird (in Zeilen 1672 und 1673 ) zunächst atom an l (ein Literal, das dem Empfänger
der Methode, einer Klausel, bekannt ist) geschickt und dann an das Ergebnis, ein Atom, die
Nachricht wert . Diese Verkettung ist ein Verstoß gegen das Gesetz Demeters. Di e Muster-
lösung
enthält diesen Verstoß nicht. Dafür aber andere.
Selbsttestaufgabe 68.1
Versuchen Sie, bevor Sie wei terlesen, weitere Verstöße gegen das Gesetz Demeters in dem Beispiel
zu finden.
Der erste Verstoß ergibt sich aus der Umsetzung der : n-Beziehung zwischen Klausel und
Literalen über Zwischenobjekte. Eine Klausel kennt genaugenommen nicht ihre Literale di-
rekt, sondern das Zwischenobjekt, in diesem Fall eine Instanz der Klasse Set. So stellt bereits
der Aufruf von atom bzw. auswerten auf der Variable l eine Verletzung des Law of De-
meter dar. Etwas deutlicher sieht man das, wenn man anstelle einer Menge und de s Itera-
tors detect: ein Array und eine Zählschleife verwendet:
Bei der Verwendung von Collections als Zwischenobjekte muss man also immer eine Aus-
nahme von Demeters Gesetz machen.
Der zweite Verstoß findet sich in Zeile 1672 : atom wert not ist ein verketteter Ausdruck
derselben Qualität wie l atom wert (selbe Zeile). Die Lösung wäre hier, der Klasse Atom
eine Methode not zu spendieren, die den negierten Wert zurückliefert, aber warum das
besserer Stil sein soll, ist kaum noch zu begründen. Auch wenn dieses Problem in JAVA und
Co. nicht existiert (da hier die logische Negation keine Nachric ht/Methode, sondern ein pri-
mitiver Operator eines primitiven Datentyps ist), so zeigt es doch die Grenzen des Law of
Demeter auf. So ist das Gesetz auch nicht allgemein anerkannt, sondern umstritten; den-
noch sollte man es verinnerlichen und sich bei Ketten ausdrücken stets fragen, ob nicht eine
Verlagerung einer hinteren Methode in eines der Objekte auf der Strecke sinnvoll wäre.
