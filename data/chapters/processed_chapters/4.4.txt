4.4 Blöcke

Wir kommen nun zu einer der wichtigsten Ausprägungen des "Alles-ist-ein-Objekt"-Mottos von SMALLTALK: den Blöcken. Genau wie eine Methode ist ein Block eine abgegrenzte Sequenz oder Folge von Anweisungen. Anders als eine Methode ist ein Block jedoch nicht benannt, kann aber benannt werden, indem er einer Variable zugewiesen wird.
Um auszudrücken, dass eine Sequenz von Ausdrücken ein Block ist, wird die Sequenz mit eckigen Klammern markiert. So ist die Definition eines Blocks, der aus der Deklaration der Variable "temp" und drei Zuweisungen besteht. Die Variablen "x" und "y" sind dabei außerhalb des Blocks im Kontext des Blocks deklariert. Der Kontext des Blocks ist die Methode, in der er definiert wurde.
Bei der Ausführung des obigen Blocks wird ein neues Blockobjekt erzeugt. Mittels := wird der Block einer Variable "swap" zugewiesen. Die Anweisungen, die den Block ausmachen, werden dabei nicht ausgeführt, selbst dann nicht, wenn der Block (wie in Zeile 175) isoliert steht und ausgeführt wird (das dabei erzeugte Objekt bleibt namenlos und wird von der Speicherbereinigung wieder entfernt).
Um die Anweisungen, die einen Block ausmachen, zur Ausführung zu bringen, muss man ihn auswerten. Dazu schickt man ihm die Nachricht "value". Der Ausdruck "swap value" bewirkt, dass die Variablen "x" und "y" aus dem Kontext des Blocks ihren Wert tauschen. Das Objekt, zu dem "swap value" ausgewertet wird, ist das Objekt, zu dem die letzte Anweisung auswertet (siehe Abschnitt 4.2). Im obigen Beispiel ist es also der Inhalt von "temp," der derselbe ist wie der von "x" aus dem Kontext.
Der Rückgabewert der Methode "value" ist zunächst immer das Objekt, zu dem der letzte Ausdruck eines Blocks auswertet, im obigen Beispiel also das durch "temp" benannte Objekt.

Frage: Was ist ein Block in SMALLTALK?
Antwort: Ein Block in SMALLTALK ist eine abgegrenzte Sequenz oder Folge von Anweisungen. Anders als eine Methode ist ein Block nicht benannt, kann aber einer Variable zugewiesen werden.

Frage: Wie kennzeichnet man in SMALLTALK eine Sequenz von Ausdrücken als Block?
Antwort: Um auszudrücken, dass eine Sequenz von Ausdrücken ein Block ist, wird die Sequenz mit eckigen Klammern markiert, z. B. [ ... ].

Frage: Wie werden Blöcke in SMALLTALK ausgeführt?
Antwort: Um die Anweisungen, die einen Block ausmachen, zur Ausführung zu bringen, muss man ihn auswerten, indem man ihm die Nachricht "value" sendet.

Frage: Was ist der Rückgabewert der Methode "value" bei der Ausführung eines Blocks?
Antwort: Der Rückgabewert der Methode "value" ist zunächst immer das Objekt, zu dem der letzte Ausdruck eines Blocks auswertet.