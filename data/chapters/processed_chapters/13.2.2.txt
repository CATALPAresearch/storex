13.2.2 Sortierte Collections

Eine weitere nützliche Collection-Klasse wird durch SortedCollection implementiert. Es handelt sich dabei um eine Subklasse von OrderedCollection, bei der die Reihenfolge der Elemente nicht von außen, also durch die Angabe eines Indexes oder die Reihenfolge der Einfügung, festgelegt wird, sondern von innen, genauer durch eine Qualität der eingefügten Objekte. Zwischenobjekte der Klasse SortedCollection setzt man ein, wenn man die in Beziehung stehenden Objekte in einer bestimmten Reihenfolge haben möchte, wie z. B. die Kinder einer Person in der Namensfolge, und zwar unabhängig davon, in welcher Reihenfolge sie der Collection hinzugefügt wurden. Voraussetzung dafür, dass die Elemente einer SortedCollection sortiert werden können, ist, dass sie verglichen werden können, dass also die (binäre) Methode <= (für kleiner gleich) darauf definiert ist. So liefert beispielsweise mit #(1 2 3) das gewünschte Ergebnis.
Wenn die Elemente, die in eine sortierte Collection eingefügt werden sollen, keine Größen sind und insbesondere den Vergleich <= nicht implementieren, dann ist es immer noch möglich, für eine neue Instanz einer SortedCollection einen sogenannten Sortierblock zu spezifizieren, der zwei formale Parameter hat und dessen Auswertung zurückliefert, ob der erste tatsächlich e Parameter kleiner oder gleich dem zweiten ist.
Eine Menge von Objekten aus einer Collection kann in eine andere übertragen werden, wobei die Eigenschaften der Ziel-Collection berücksichtigt werden, z. B. asSet, das doppelte Elemente entfernt. Diese Konvertierungsmethoden sind in Collection implementiert, analog zu asBag und asOrderedCollection oben. Besonders interessant sind natürlich Konvertierungen in Collections, die strengere Bedingungen stellen, z. B. asSet und asSortedCollection.
Bitte beachten Sie jedoch, dass eine nachträgliche Änderung der Attributwerte, die zum Vergleich der Objekte für die Sortierung herangezogen wurden, keine automatische Änderung der Reihenfolge bewirkt, selbst wenn dies eigentlich notwendig wäre.

Frage: Was ist eine SortedCollection in SMALLTALK, und wie unterscheidet sie sich von anderen Collection-Klassen?
Antwort: Eine SortedCollection ist eine Collection-Klasse in SMALLTALK, die eine Subklasse von OrderedCollection ist. Im Gegensatz zu anderen Collection-Klassen wird die Reihenfolge der Elemente in einer SortedCollection nicht von außen, durch Angabe eines Indexes oder die Reihenfolge der Einfügung, festgelegt. Stattdessen wird die Reihenfolge von innen durch eine Qualität der eingefügten Objekte bestimmt. Dies ermöglicht es, die in Beziehung stehenden Objekte in einer bestimmten Reihenfolge zu halten, unabhängig von der Reihenfolge, in der sie der Collection hinzugefügt wurden.

Frage: Welche Voraussetzungen müssen erfüllt sein, damit die Elemente einer SortedCollection sortiert werden können?
Antwort: Damit die Elemente einer SortedCollection sortiert werden können, müssen sie vergleichbar sein, dh die Methode <= (für kleiner gleich) muss für die Elemente definiert sein. Dies ermöglicht es, die Elemente aufsteigend zu sortieren.

Frage: Was ist ein Sortierblock in einer SortedCollection, und wie wird er verwendet?
Antwort: Ein Sortierblock ist eine Funktion, die zwei formale Parameter hat und zurückliefert, ob der erste Parameter kleiner oder gleich dem zweiten ist. In einer SortedCollection kann ein Sortierblock angegeben werden, wenn die Elemente keine Größen sind oder keinen natürlichen Vergleich unterstützen. Der Sortierblock wird verwendet, um die Elemente zu vergleichen und die Reihenfolge in der SortedCollection festzulegen. Wenn kein Sortierblock angegeben wird, wird ein Standardsortierblock verwendet.

Frage: Wie können Objekte von einer Collection in eine andere übertragen werden, und warum kann dies nützlich sein?
Antwort: Eine Menge von Objekten aus einer Collection kann in eine andere übertragen werden, indem Konvertierungsmethoden wie asSet oder asSortedCollection verwendet werden. Dies ist nützlich, um die Eigenschaften der Ziel-Collection zu berücksichtigen, z. B. doppelte Elemente zu entfernen oder die Elemente zu sortieren. Es ermöglicht auch die Umwandlung von Collections in Collections mit strengeren Bedingungen, was je nach Anwendungsfall nützlich sein kann.

Frage: Was sollten Sie beachten, wenn Sie die Attributwerte von Objekten in einer SortedCollection ändern?
Antwort: Wenn Sie die Attributwerte von Objekten in einer SortedCollection nachträglich ändern, führt dies nicht automatisch zu einer Änderung der Reihenfolge der Elemente in der SortedCollection. Dies gilt selbst dann, wenn eine Änderung der Reihenfolge erforderlich wäre. Sie müssen sicherstellen, dass die Sortierung erneut durchgeführt wird, um die korrekte Reihenfolge beizubehalten.