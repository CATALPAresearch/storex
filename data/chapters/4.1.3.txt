4.1.3 Auswertung von Ausdrücken
Ausdrücke allein sind nur syntaktische Figuren — um das Objekt zu liefern, für das sie ste-
hen, müssen sie ausgewertet werden. Es ist die Auswertung, bei der ein Programm tatsäch-
lich „etwas tut“.
Das Elementarste, das ein Programm tun kann, ist die Auswertung einer
Zuweisung wie beispielsweise y := x . Diese Auswertung führt dazu,
dass die Variable y nach der Zuweisun g auf dasselbe Objekt verweist wie
vorher schon x. Dabei steht der gesamte Ausdruck y := x für (eine Referenz auf) das
Objekt, auf das x (und nach seiner Auswertung auch y) verweist. Die Zuweisung dieses
Objektes an y ist gewissermaßen nur ein Seiteneffekt der Auswertung des Ausdrucks.19
Man beachte, dass es sich beim Zuweisungsoperator := nicht u m einen (binären) Nachrich-
tenselektor handelt: Es wird hier nämlich keine Nachricht an ein Objekt geschickt, sondern
der Inhalt einer Variable manipuliert. Die Zuweisung ist tatsächlich eines der wenigen Primi-
tive SMALLTALK s, also eine der Operationen, die nicht in sich selbst programmiert, sondern
fest „verdrahteter“ Teil der Sprache sind (vgl. Abschnitt 1.6).
19 Über das Wort Seiteneffekt wird viel gestritten. Manche meinen, es müsste Nebeneffekt heißen,
aber dieses Wort ist genauso unnötig, wenn Nebenwirkung das ist, was gemeint ist. Als strittig würde
ich schon eher ansehen, ob man hier überhaupt von einer Nebenwirkung sprechen sollte, denn der
sich einstellende Effekt ist ja das vornehmliche Ziel ein er Zuweisung, so dass man eher von Wirkung
(oder Effekt) sprechen sollte. Für mich ist Seiteneffekt Jargon, bei dem jede weiß, was gemeint ist. Kaskadierung
anstelle temporärer
Variablen
Auswertung von
Zuweisungs -
ausdrücken
Nachrichtenausdr ücke werden ausgewertet, in dem die Nachricht (das
Prädikat des Satzes) an das Empfängerobjekt (das Subjekt) mit den Para-
metern (den Prädikatsergänzungen) gesendet wird und das Empfänge-
robjekt als Ergebnis der Nachricht ein Objekt zurückliefert. Wie das Em pfängerobjekt das
Ergebnisobjekt bestimmt, darauf kommen wir noch; hier ist nur wichtig, dass der Nachrich-
tenausdruck im Zuge der Auswertung gewissermaßen durch das Objekt, für das er steht,
ersetzt wird. Man kann sich das genauso vorstellen wie die Auswer tung einer (mathemati-
schen) Funktion f, deren Funktions anwendung f(x) auf ein Objekt x ebenfalls für den Funk-
tionswert steht.
Eine häufig gebrauchte, von allen Objekten verstandene unäre Nachricht
ist printString , in Reaktion auf die das Empfängerobjekt eine textuelle Repräsentation
von sich zurückgibt:
68 12 printString
liefert den String '12' , die Auswertung von Zeile 45 den String 'abc' . Der bereits in
Zeile 53 angeführte binäre Nachrichtena usdruck
69 1 + 2
liefert wie erhofft das Objekt „3“. Bei der Auswertung des Schlüsselwortau sdrucks
70 12 printOn: Trans cript
bei dem als Seiteneffekt die Zahl „12“ in ihrer textuellen Repräsentation, also als String
'12' auf dem Ausgabestrom, auf den die Variable Transcript verweist, ausgegeben
wird, wird das Empfängerobjekt „12“ zurückgeliefert.
Es ist in SMALLTALK , anders als z. B. bei als void deklarierten Methoden in
JAVA oder C# , nicht möglich, in Reaktion auf einen Nachrichtenversand
nichts zurückzugegeben. Dies könnte man in Zeile 70 als sinnvoll erach-
ten, da man hier eigentlich nur an dem (Seiten -) Effekt , der Ausgabe von
„12“ auf dem Transcript, interessiert ist. Wenn die zu einer Nachricht gehörend e Methode
keinen sinnvollen Rückgabewert hat, wird standardmäßig immer das Empfängerobjekt zu-
rückgegeben ; auch das dient, da man Nachrichtenausdrücke so stets verketten kann, einem
Fluent API . Sollte es für das Rückgabeobjekt im Kontext der Nachricht (des Nachrichtenver-
sands) keine Verwendung geben, es also nicht einer Variable zugewiesen oder sonst wie
Teil eines anderen Ausdrucks sein, verfällt es einfach. Da der Rückgabewert aber tech nisch
nur eine Referenz auf das Objekt ist, bleibt die Existenz des Objektes davon zunächst unbe-
rührt. Nur wenn es sonst keine anderen Referenzen auf das Objekt gibt, etwa weil es extra
für die Rückgabe erzeugt wurde, wird das Objekt bei der nächsten Speicherbereinigung
entfernt. Auswertung von
Nachrichten -
ausdrücken
Beispiele
Nachrichten -
ausdrücke als
Funktions -
anwendungen
Da die Auswertung eines Nachrichtenausdrucks zur Abarbeitung der An-
weisungen des Rumpfs einer Methode führt, nennt man ihn auch Metho-
denaufruf . Warum dies e Bezeichnung legitim ist, wird jedoch erst in Ab-
schnitt 4.3 klar.
Zusammenfassend wird also
 ein Literal zu dem Objekt ausgewertet, das es repräs entiert,
 eine Variable zu dem Objekt, das sie benennt,
 eine Zuweisung zu dem Objekt, zu dem der Ausdruck auf der rechten Seite der
Zuweisung ausgewertet wird,
 ein Nachrichtenausdruck zu dem Objekt, das als Antwort auf die Nachricht zurück-
gegeben wird, sowi e
 ein kaskadierter Nachrichtenausdruck zu dem Objekt, zu dem sein letzter Nachrich-
tenausdruck ausgewertet wird.
