44.1 Type casts

Wie bereits in Kapitel 27 von Kurseinheit 3 erläutert, versteht man unter einem Type cast (einer Typumwandlung) den Vorgang, bei dem einem Programmelement ein anderer Typ aufgezwungen wird als der, mit dem es deklariert wurde. Type casts werden also insbesondere auf Variablen und auf Methodenausdrücke angewendet, und zwar immer dann, wenn man diese einer Variable zuweisen will, zu der keine Zuweisungskompatibilität besteht, oder wenn man darauf eine Methode aufrufen (oder ein Feld zugreifen) will, das der deklarierte Typ nicht anbietet.
Wie schon in Kapitel 27, so unterscheiden wir auch hier in Abhängigkeit davon, wie die beteiligten Typen, der Ausgangstyp und der Zieltyp eines Type casts, miteinander in Beziehung stehen, drei Arten von Typumwandlungen: Up casts: Der Zieltyp ist ein Supertyp des Ausgangstyps. Down casts: Der Zieltyp ist ein Subtyp des Ausgangstyps. Cross casts: Zieltyp und Ausgangstyp stehen in keiner Subtypenbeziehung zueinander, stehen also gewissermaßen nebeneinander.
Wie man sich leicht vor Augen hält, ist ein Up cast auch in JAVA immer sicher, da jedes Objekt neben seinem Typ zugleich auch den Typ all seiner Supertypen hat (weswegen der Up cast auch immer weggelassen werden kann); Down und Cross casts sind jedoch nur erfolgreich, wenn das Objekt, zu dem der typumgewandelte Ausdruck auswertet, tatsächlich den Zieltyp (oder einen Subtyp davon) hat. Dies kann jedoch zur Übersetzungszeit nicht garantiert werden; Down und Cross casts können daher zu Laufzeittypfehlern (der in JAVA sogenannten ClassCastException) führen.
Mit der Einführung von Generics ergeben sich ein paar Probleme mit impliziten Typumwandlungen.

Frage: Was versteht man unter einem Type cast (Typumwandlung)?
Antwort: Ein Type cast ist der Vorgang, bei dem einem Programmelement ein anderer Typ aufgezwungen wird als der, mit dem es deklariert wurde.

Frage: Wann werden Type casts in JAVA verwendet?
Antwort: Type casts werden in JAVA verwendet, wenn man einem Programmelement, das einen bestimmten Typ hat, einen anderen Typ zuweisen möchte oder wenn man auf Methoden oder Felder zugreifen möchte, die nicht im deklarierten Typ verfügbar sind.

Frage: Welche Arten von Typumwandlungen gibt es in JAVA?
Antwort: In JAVA gibt es drei Arten von Typumwandlungen: Up casts, Down casts und Cross casts.

Frage: Was ist ein Up cast?
Antwort: Ein Up cast tritt auf, wenn der Zieltyp ein Supertyp des Ausgangstyps ist.

Frage: Was ist ein Down cast?
Antwort: Ein Down cast tritt auf, wenn der Zieltyp ein Subtyp des Ausgangstyps ist.

Frage: Was ist ein Cross cast?
Antwort: Ein Cross cast tritt auf, wenn Zieltyp und Ausgangstyp keine Subtypenbeziehung zueinander haben und nebeneinander stehen.

Frage: Welche Art von Typumwandlung ist immer sicher?
Antwort: Ein Up cast ist immer sicher, da jedes Objekt neben seinem Typ auch den Typ all seiner Supertypen hat.

Frage: Welche Art von Typumwandlung kann zu Laufzeittypfehlern führen?
Antwort: Down und Cross casts können zu Laufzeittypfehlern führen, wenn das Objekt, zu dem der typumgewandelte Ausdruck ausgewertet wird, nicht den Zieltyp oder einen Subtyp davon hat. Dies kann zur Laufzeit zu ClassCastException-Fehlern führen.